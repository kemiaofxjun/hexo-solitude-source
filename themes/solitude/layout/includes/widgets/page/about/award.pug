- award = site.data.about.award
- var sum = 0
- var rewardList = site.data.about.rewardList || []
- var sortedRewards = rewardList.sort((a, b) => b.time - a.time)

each reward in rewardList
    - sum += reward.money

if rewardList.length > 0 && site.data.about.award.enable
    .author-content
        .author-content-item.single.reward
            .author-content-item-tips= _p('award.thanks')
            span.author-content-item-title= _p('award.title')
            .author-content-item-description
                != award.description
            .reward-list-all
                each reward, index in sortedRewards
                    if rewardList.length <= award.limit
                        .reward-list-item
                            .reward-list-item-name= reward.name
                            .reward-list-bottom-group
                                .reward-list-item-money(style="background-color:" + reward.color)
                                    if reward.icon
                                        i.astrabay(class=reward.icon)
                                    | ¥ #{reward.money}
                                time.datetime.reward-list-item-time(datetime=moment(reward.time).format())
                    else if index < award.limit - 1
                        .reward-list-item
                            .reward-list-item-name= reward.name
                            .reward-list-bottom-group
                                .reward-list-item-money(style="background-color:" + reward.color)
                                    if reward.icon
                                        i.astrabay(class=reward.icon)
                                    | ¥ #{reward.money}
                                time.datetime.reward-list-item-time(datetime=moment(reward.time).format())

                if rewardList.length > award.limit
                    - const isInternalLink = award.more.startsWith('/')
                    a.reward-list-item.reward-list-item-more(onclick=isInternalLink ? `pjax.loadUrl("${award.more}")`: null, href=isInternalLink ? null : url_for(award.more), target=isInternalLink ? null : "_blank")
                        .reward-list-item-name 查看更多
                        .reward-list-bottom-group
                            i.astrabay.fas.fa-circle-chevron-right

                if theme.post.award.enable
                    .post-reward
                        .post-reward(onclick="AddRewardMask()")
                        .reward-button(title=_p('award.tipping'))
                            i.astrabay.fas.fa-heart
                            = _p('award.tipping')
                        .reward-main
                            ul.reward-all
                                span.reward-title= theme.post.award.title
                                ul.reward-group
                                    - var rewards = theme.post.award.list
                                    each reward in rewards
                                        li.reward-item
                                            a(href=url_for(reward.url))
                                                img.post-qr-code-img(alt=reward.name, src=reward.qcode, style="border-color:" + reward.color)
                                            .post-qr-code-desc= reward.name
            .reward-list-tips
                p= award.tips.replace('{sum}', sum.toFixed(2))